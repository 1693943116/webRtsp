<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>优化后测试</title>
  </head>
  <body>
    <iframe
      id="iframe"
      src="本地测试为index.html开启的服务地址 线上则为部署后的地址"
      frameborder="0"
      style="width: 500px; height: 500px"
    ></iframe>
    <button onclick="poi()">测试换区和初始同一个流</button>
    <button onclick="poi4()">历史视频很多（数组）</button>
    <button onclick="poi5()">实时</button>
    <script>
      // 默认实时视频
      window.onload = function () {
        const data = {
          rtsp: "rtsp流地址", // 换成自己的
          number: 1, // 总共分几块
          current: 1, // 播放第几块
        };
        document
          .getElementById("iframe")
          .contentWindow.postMessage(JSON.stringify(data), "*");
      };
      function poi() {
        const data = {
          rtsp: "rtsp流地址",
          number: 9, // 总共分几块
          current: 3, // 播放第几块
        };
        document
          .getElementById("iframe")
          .contentWindow.postMessage(JSON.stringify(data), "*");
      }
      function poi4() {
        const data = [
          {
            rtsp: "rtsp流地址", // 地址和公司后端协商 （历史视频）
            number: 9, // 总共分几块
            current: 3, // 播放第几块
            time: 5000, // 视频的时间 毫秒
          },

          {
            rtsp: "rtsp流地址",
            number: 16, // 总共分几块
            current: 4, // 播放第几块
            time: 5000, // 视频的时间 毫秒
          },
          {
            rtsp: "rtsp流地址",
            number: 1, // 总共分几块
            current: 1, // 播放第几块
            time: 5000, // 视频的时间 毫秒
          },
        ];
        document
          .getElementById("iframe")
          .contentWindow.postMessage(JSON.stringify(data), "*");
      }
    </script>
  </body>
</html>
